!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ZenArea=e()}}(function(){return function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=e("./zenarea"),i=e("./utils");r.prototype.command=function(e,t,n){var r=i.parseKey(e);return r.command=t,r.args=Array.isArray(n)?n:[],this._keyBindings[i.normalizeName(r)]=r,this}},{"./utils":7,"./zenarea":8}],2:[function(e,t,n){"use strict";var r=e("./utils");t.exports=n={keydown:function(e){var t=this._zen,n=r.normalizeName({name:r.codeToKey(e.keyCode),meta:e.metaKey,ctrl:e.ctrlKey,shift:e.shiftKey,alt:e.altKey}),i=t._keyBindings[n];if(!i)return!0;var a=i.command;return"string"==typeof a&&(a=t[a]),"function"==typeof a?(e.preventDefault(),e.stopPropagation(),a.apply(t,i.args),!1):!0}}},{"./utils":7}],3:[function(e,t,n){"use strict";t.exports=n=e("./zenarea")},{"./zenarea":8}],4:[function(e,t,n){"use strict";var r=e("./zenarea"),i=e("./utils");r.prototype.insertText=function(e,t){var n=this._textarea,r=this.getSelection(),i=document.createEvent("TextEvent");if("function"==typeof i.initTextEvent)i.initTextEvent("textInput",!0,!0,null,e),n.dispatchEvent(i);else{var a=n.value;n.value=a.substring(0,r.start)+e+a.substring(r.end)}return t?this.setSelection(r.start,r.start+e.length):this.setSelection(r.start+e.length),this.focus()},r.prototype.indent=function(e){null==e&&(e="  ");var t=this.getSelection(),n=this.value;if(!t.length)return this.insertText(e);var r={start:Math.max(0,n.lastIndexOf("\n",t.start-1)+1),end:t.end};return r.value=n.substring(r.start,r.end),r.newValue=r.value.replace(/^/gm,e),r.newStart=t.start+e.length,r.newEnd=t.end+r.newValue.length-r.value.length,this.setSelection(r.start,r.end),this.insertText(r.newValue),this.setSelection(r.newStart,r.newEnd),this.focus()},r.prototype.outdent=function(e){function t(t,n){for(var r=0;r<e.length&&t.charAt(n)==e.charAt(r);r++)t=t.substring(0,n)+t.substring(n+1);return t}null==e&&(e="  ");var n=this.getSelection(),r=this.value,i={start:Math.max(0,r.lastIndexOf("\n",n.start-1)+1),end:n.end};i.value=r.substring(i.start,i.end),i.newValue=i.value,i.newValue=t(i.newValue,0),i.newStart=n.start-(i.value.length-i.newValue.length);for(var a=i.newValue.indexOf("\n");-1!=a&&a<i.newValue.length;)i.newValue=t(i.newValue,a+1),a=i.newValue.indexOf("\n",a+1);return i.newEnd=n.end-(i.value.length-i.newValue.length),this.setSelection(i.start,i.end),this.insertText(i.newValue),this.setSelection(i.newStart,i.newEnd),this.focus()},r.prototype.surround=function(e,t,n){var r=this.getSelection(),a=i.startsWith(r.value,e)&&i.endsWith(r.value,t);return r.value=n&&a?r.value.substring(e.length,r.value.length-t.length):e+r.value+t,this.insertText(r.value,!0)}},{"./utils":7,"./zenarea":8}],5:[function(e,t,n){"use strict";var r=e("./zenarea");r.prototype.find=function(e,t){t=t||0;var n=this.value.substring(t),r=e.exec(n);return r?this.setSelection(t+r.index,t+r.index+r[0].length):this.focus()},r.prototype.findNext=function(e){var t=this.getSelection();return this.find(e,t.end)},r.prototype.replace=function(e,t,n){this.find(e,n);var r=this.getSelection();return e.test(r.value)?this.insertText(t,!0):this.focus()},r.prototype.replaceNext=function(e,t){var n=this.getSelection();return this.replace(e,t,n.end)},r.prototype.replaceAll=function(e,t){return this.selectAll().insertText(this.value.replace(e,t))}},{"./zenarea":8}],6:[function(e,t,n){"use strict";var r=e("./zenarea"),i=e("./utils");r.prototype.getSelection=function(){var e=this._textarea,t=e.selectionStart,n=e.selectionEnd;if("number"==typeof t&&"number"==typeof t)return{start:t,end:n,length:n-t,value:e.value.substring(t,n)};var r=document.selection.createRange();e.focus();var i=e.value.length,a=e.value.replace(/\r\n/g,"\n"),s=e.createTextRange();s.moveToBookmark(r.getBookmark());var o=e.createTextRange();return o.collapse(!1),s.compareEndPoints("StartToEnd",o)>-1?t=n=i:(t=-s.moveStart("character",-i),t+=a.slice(0,t).split("\n").length-1,s.compareEndPoints("EndToEnd",o)>-1?n=i:(n=-s.moveEnd("character",-i),n+=a.slice(0,n).split("\n").length-1)),{start:t,end:n,length:n-t,value:e.value.substring(t,n)}},r.prototype.setSelection=function(e,t){if(null==t&&(t=e),e>t){var n=t;t=e,e=n}var r=this._textarea;return r.focus(),r.setSelectionRange?r.setSelectionRange(e,t):r.createTextRange&&(r=r.createTextRange(),r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()),this.focus()},r.prototype.selectAll=function(){return this.setSelection(0,this.value.length),this.focus()},r.prototype.selectLines=function(e,t){if(null==t&&(t=e),e>t){var n=t;t=e,e=n}for(var r=this.value,i=0,a=0;e>a;a++)if(i=r.indexOf("\n",i)+1,!i)return this.setSelection(r.length,r.length);var s=i;for(a=0;t-e>a;a++)if(i=r.indexOf("\n",i)+1,!i)return this.setSelection(s,r.length);return this.setSelection(s,e==t?i:i-1)},r.prototype.selectCurrentLines=function(){var e=this.value,t=this.getSelection();return t.start=Math.max(0,e.lastIndexOf("\n",t.start-1)+1),t.end=Math.min(e.length,e.indexOf("\n",t.end)),-1==t.end&&(t.end=e.length),this.setSelection(t.start,t.end),this.focus()},r.prototype.selectLeft=function(e){for(var t=this.getSelection();!e(t)&&t.start>0;)this.setSelection(t.start-1,t.end),t=this.getSelection();return this.focus()},r.prototype.selectRight=function(e){for(var t=this.value,n=this.getSelection();!e(n)&&n.end<t.length;)this.setSelection(n.start,n.end+1),n=this.getSelection();return this.focus()},r.prototype.expandSelection=function(){var e=this.value,t=this.getSelection(),n=e.charAt(t.start-1),r=e.charAt(t.end);return i.isEmptyOrNewline(n)&&i.isEmptyOrNewline(r)?this.selectAll():i.containsBoundaries(t.value)?this.selectCurrentLines():i.isEmptyOrBoundary(n)&&i.isEmptyOrBoundary(r)?this.selectCurrentLines():(this.selectLeft(function(t){return i.isEmptyOrBoundary(e.charAt(t.start-1))}),this.selectRight(function(t){return i.isEmptyOrBoundary(e.charAt(t.end))}),this.focus())}},{"./utils":7,"./zenarea":8}],7:[function(e,t,n){"use strict";n.isBoundary=function(e){var t=e.charCodeAt(0);return 47>=t||t>=58&&63>=t||t>=91&&96>=t||t>=123&&191>=t||t>=8192&&8303>=t||t>=8592&&8959>=t},n.isEmptyOrBoundary=function(e){return""==e||n.isBoundary(e)},n.isEmptyOrNewline=function(e){return""==e||"\n"==e},n.containsBoundaries=function(e){for(var t=0;t<e.length;t++)if(n.isBoundary(e.charAt(t)))return!0;return!1},n.startsWith=function(e,t){return 0==e.indexOf(t)},n.endsWith=function(e,t){return e.lastIndexOf(t)==e.length-t.length};var r={8:["backspace"],9:["tab"],13:["enter"],19:["pause","break"],20:["caps","caps-lock","capslock"],27:["esc","escape"],32:["space"],33:["pageup","page-up"],34:["pagedown","page-down"],35:["end"],36:["home"],37:["left","arrow-left"],38:["up","arrow-up"],39:["right","arrow-right"],40:["down","arrow-down"],45:["ins","insert"],46:["del","delete"],48:["0"],49:["1"],50:["2"],51:["3"],52:["4"],53:["5"],54:["6"],55:["7"],56:["8"],57:["9"],65:["a"],66:["b"],67:["c"],68:["d"],69:["e"],70:["f"],71:["g"],72:["h"],73:["i"],74:["j"],75:["k"],76:["l"],77:["m"],78:["n"],79:["o"],80:["p"],81:["q"],82:["r"],83:["s"],84:["t"],85:["u"],86:["v"],87:["w"],88:["x"],89:["y"],90:["z"],93:["select","menu"],96:["num0"],97:["num1"],98:["num2"],99:["num3"],100:["num4"],101:["num5"],102:["num6"],103:["num7"],104:["num8"],105:["num9"],106:["num*"],107:["num+"],109:["num-"],110:["num."],111:["num/"],112:["f1"],113:["f2"],114:["f3"],115:["f4"],116:["f5"],117:["f6"],118:["f7"],119:["f8"],120:["f9"],121:["f10"],122:["f11"],123:["f12"],144:["num-lock","numlock"],145:["scroll-lock","scrolllock"],186:[";","semicolon"],187:["=","equal"],188:[",","comma"],189:["-","minus","dash"],190:[".","period","dot"],191:["/","slash"],192:["`","grave"],219:["["],220:["\\","backslash"],221:["]"],222:["'"]},i={};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(t){i[t]=e})}),n.parseKey=function(e){var t={meta:!1,ctrl:!1,shift:!1,alt:!1};e=e.replace(/(?:meta|win|cmd|command)\s*\+\s*/gi,function(){return t.meta=!0,""}),e=e.replace(/(?:ctrl|control|ctl)\s*\+\s*/gi,function(){return t.ctrl=!0,""}),e=e.replace(/shift\s*\+\s*/gi,function(){return t.shift=!0,""}),e=e.replace(/(?:alt|option)\s*\+\s*/gi,function(){return t.alt=!0,""}),e=e.trim().toLowerCase();var n=i[e];return null==n?t:(t.code=n,t.name=r[n][0],t)},n.normalizeName=function(e){var t="";return e.meta&&(t+="meta+"),e.ctrl&&(t+="ctrl+"),e.shift&&(t+="shift+"),e.alt&&(t+="alt+"),t+e.name},n.codeToKey=function(e){return r[e]}},{}],8:[function(e,t,n){"use strict";var r=e("./events"),i=t.exports=n=function(e){if(!(this instanceof i))return new i(e);if(this._textarea=e[0]||e,!this._textarea instanceof HTMLTextAreaElement)throw new Error("Pass valid <textarea> to ZenArea constructor.");this._textarea._zen=this,this._keyBindings={},this.init()};Object.defineProperty(i.prototype,"value",{get:function(){return this._textarea.value}}),i.prototype.focus=function(){return this._textarea.focus(),this},i.prototype.init=function(){var e=this._textarea;Object.keys(r).forEach(function(t){e.addEventListener(t,r[t])})},i.prototype.destroy=function(){var e=this._textarea;Object.keys(r).forEach(function(t){e.removeEventListener(t,r[t])})},e("./selection"),e("./search"),e("./manipulation"),e("./command")},{"./command":1,"./events":2,"./manipulation":4,"./search":5,"./selection":6}]},{},[3])(3)});