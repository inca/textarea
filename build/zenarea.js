!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ZenArea=t()}}(function(){return function t(e,n,r){function a(i,o){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return a(n?n:t)},l,l.exports,t,e,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){"use strict";var r=t("./utils");e.exports=n={keydown:function(t){var e=this._zen,n=r.normalizeName({name:r.codeToKey(t.keyCode),meta:t.metaKey,ctrl:t.ctrlKey,shift:t.shiftKey,alt:t.altKey}),a=e._keyBindings[n];if(!a)return!0;var s=a.command;return"string"==typeof s&&(s=e[s]),"function"==typeof s?(t.preventDefault(),t.stopPropagation(),s.apply(e,a.args),!1):!0}}},{"./utils":7}],2:[function(t,e,n){"use strict";e.exports=n=t("./zenarea")},{"./zenarea":8}],3:[function(t,e,n){"use strict";var r=t("./zenarea"),a=t("./utils");r.prototype.get=function(t,e){return{start:t,end:e,length:e-t,value:this.value.substring(t,e)}},r.prototype.getLines=function(t,e){if(null==e&&(e=t),t>e){var n=e;e=t,t=n}for(var r=this.value,a=0,s=0;t>s;s++)if(a=r.indexOf("\n",a)+1,!a)return this.get(r.length,r.length);var i=a;for(s=0;e-t>s;s++)if(a=r.indexOf("\n",a)+1,!a)return this.get(i,r.length);return this.get(i,t==e?a:a-1)},r.prototype.getCurrentLines=function(){var t=this.value,e=this.selection;return e.start=Math.max(0,t.lastIndexOf("\n",e.start-1)+1),e.end=Math.min(t.length,t.indexOf("\n",e.end)),-1==e.end&&(e.end=t.length),this.get(e.start,e.end)},r.prototype.getExpandedLeft=function(t){for(var e=this.selection;!t(e)&&e.start>0;)e=this.get(e.start-1,e.end);return e},r.prototype.getExpandedRight=function(t){for(var e=this.value,n=this.selection;!t(n)&&n.end<e.length;)n=this.get(n.start,n.end+1);return n},r.prototype.getExpanded=function(){var t=this.value,e=this.selection,n=t.charAt(e.start-1),r=t.charAt(e.end);if(a.isEmptyOrNewline(n)&&a.isEmptyOrNewline(r))return this.get(0,t.length);if(a.isEmptyOrBoundary(n)&&a.isEmptyOrBoundary(r))return this.getCurrentLines();var s=this.getExpandedLeft(function(e){return a.isEmptyOrBoundary(t.charAt(e.start-1))}),i=this.getExpandedRight(function(e){return a.isEmptyOrBoundary(t.charAt(e.end))});return this.get(s.start,i.end)}},{"./utils":7,"./zenarea":8}],4:[function(t,e,n){"use strict";var r=t("./zenarea"),a=t("./utils");r.prototype.insertText=function(t,e){var n=this.selection,r=this._textarea;if("undefined"!=typeof window.chrome)document.execCommand("insertText",null,t);else{var a=r.value;r.value=a.substring(0,n.start)+t+a.substring(n.end)}return e?this.select(n.start,n.start+t.length):this.select(n.start+t.length),this.focus()},r.prototype.deleteText=function(){return this.insertText("",!1)},r.prototype.indent=function(t){null==t&&(t="  ");var e=this.selection,n=this.value;if(!e.length)return this.insertText(t);var r={start:Math.max(0,n.lastIndexOf("\n",e.start-1)+1),end:e.end};return r.value=n.substring(r.start,r.end),r.newValue=r.value.replace(/^/gm,t),r.newStart=e.start+t.length,r.newEnd=e.end+r.newValue.length-r.value.length,this.select(r.start,r.end),this.insertText(r.newValue),this.select(r.newStart,r.newEnd),this.focus()},r.prototype.outdent=function(t){function e(e,n){for(var r=0;r<t.length&&e.charAt(n)==t.charAt(r);r++)e=e.substring(0,n)+e.substring(n+1);return e}null==t&&(t="  ");var n=this.selection,r=this.value,a={start:Math.max(0,r.lastIndexOf("\n",n.start-1)+1),end:n.end};a.value=r.substring(a.start,a.end),a.newValue=a.value,a.newValue=e(a.newValue,0),a.newStart=n.start-(a.value.length-a.newValue.length);for(var s=a.newValue.indexOf("\n");-1!=s&&s<a.newValue.length;)a.newValue=e(a.newValue,s+1),s=a.newValue.indexOf("\n",s+1);return a.newEnd=n.end-(a.value.length-a.newValue.length),this.select(a.start,a.end),this.insertText(a.newValue),this.select(a.newStart,a.newEnd),this.focus()},r.prototype.surround=function(t,e,n){var r=this.selection,s=a.startsWith(r.value,t)&&a.endsWith(r.value,e);return r.value=n&&s?r.value.substring(t.length,r.value.length-e.length):t+r.value+e,this.insertText(r.value,!0)},r.prototype.deleteCurrentLines=function(){var t=this.selection,e=this.value,n=Math.max(0,e.lastIndexOf("\n",t.start-1)+1),r=t.start-n,a=this.getCurrentLines();a.end<e.length&&(a.end+=1),this.select(a.start,a.end).deleteText(),t=this.selection,e=this.value;var s=e.indexOf("\n",t.start);return s=Math.min(t.start+r,-1==s?e.length:s),this.select(s,s)},r.prototype.duplicate=function(){var t=this.selection;if(!t.length){var e=this.getCurrentLines();return this.select(e.end).insertText("\n"+e.value).select(t.start+e.value.length+1)}return this.select(t.end).insertText(t.value,!0)}},{"./utils":7,"./zenarea":8}],5:[function(t,e,n){"use strict";var r=t("./zenarea");r.prototype.find=function(t,e){e=e||0;var n=this.value.substring(e),r=t.exec(n);return r?this.select(e+r.index,e+r.index+r[0].length):this.focus()},r.prototype.findNext=function(t){var e=this.selection;return this.find(t,e.end)},r.prototype.replace=function(t,e,n){this.find(t,n);var r=this.selection;return t.test(r.value)?this.insertText(r.value.replace(t,e),!0):this.focus()},r.prototype.replaceNext=function(t,e){var n=this.selection;return this.replace(t,e,n.end)},r.prototype.replaceAll=function(t,e){return this.selectAll().insertText(this.value.replace(t,e))}},{"./zenarea":8}],6:[function(t,e,n){"use strict";var r=t("./zenarea");Object.defineProperty(r.prototype,"selection",{get:function(){var t=this._textarea,e=t.selectionStart,n=t.selectionEnd;if("number"==typeof e&&"number"==typeof e)return{start:e,end:n,length:n-e,value:t.value.substring(e,n)};var r=document.selection.createRange();t.focus();var a=t.value.length,s=t.value.replace(/\r\n/g,"\n"),i=t.createTextRange();i.moveToBookmark(r.getBookmark());var o=t.createTextRange();return o.collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?e=n=a:(e=-i.moveStart("character",-a),e+=s.slice(0,e).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?n=a:(n=-i.moveEnd("character",-a),n+=s.slice(0,n).split("\n").length-1)),{start:e,end:n,length:n-e,value:t.value.substring(e,n)}}}),r.prototype.select=function(t,e){if(null==e&&(e=t),t>e){var n=e;e=t,t=n}var r=this._textarea;return r.focus(),r.setSelectionRange?r.setSelectionRange(t,e):r.createTextRange&&(r=r.createTextRange(),r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",t),r.select()),this.focus()},r.prototype.selectAll=function(){return this.select(0,this.value.length)},r.prototype.selectLines=function(t,e){var n=this.getLines(t,e);return this.select(n.start,n.end)},r.prototype.selectCurrentLines=function(){var t=this.getCurrentLines();return this.select(t.start,t.end)},r.prototype.selectLeft=function(t){var e=this.getExpandedLeft(t);return this.select(e.start,e.end)},r.prototype.selectRight=function(t){var e=this.getExpandedRight(t);return this.select(e.start,e.end)},r.prototype.expandSelection=function(){var t=this.getExpanded();return this.select(t.start,t.end)}},{"./zenarea":8}],7:[function(t,e,n){"use strict";n.isBoundary=function(t){var e=t.charCodeAt(0);return 47>=e||e>=58&&63>=e||e>=91&&96>=e||e>=123&&191>=e||e>=8192&&8303>=e||e>=8592&&8959>=e},n.isEmptyOrBoundary=function(t){return""==t||n.isBoundary(t)},n.isEmptyOrNewline=function(t){return""==t||"\n"==t},n.containsBoundaries=function(t){for(var e=0;e<t.length;e++)if(n.isBoundary(t.charAt(e)))return!0;return!1},n.startsWith=function(t,e){return 0==t.indexOf(e)},n.endsWith=function(t,e){return t.lastIndexOf(e)==t.length-e.length};var r={8:["backspace"],9:["tab"],13:["enter"],19:["pause","break"],20:["caps","caps-lock","capslock"],27:["esc","escape"],32:["space"],33:["pageup","page-up"],34:["pagedown","page-down"],35:["end"],36:["home"],37:["left","arrow-left"],38:["up","arrow-up"],39:["right","arrow-right"],40:["down","arrow-down"],45:["ins","insert"],46:["del","delete"],48:["0"],49:["1"],50:["2"],51:["3"],52:["4"],53:["5"],54:["6"],55:["7"],56:["8"],57:["9"],65:["a"],66:["b"],67:["c"],68:["d"],69:["e"],70:["f"],71:["g"],72:["h"],73:["i"],74:["j"],75:["k"],76:["l"],77:["m"],78:["n"],79:["o"],80:["p"],81:["q"],82:["r"],83:["s"],84:["t"],85:["u"],86:["v"],87:["w"],88:["x"],89:["y"],90:["z"],93:["select","menu"],96:["num0"],97:["num1"],98:["num2"],99:["num3"],100:["num4"],101:["num5"],102:["num6"],103:["num7"],104:["num8"],105:["num9"],106:["num*"],107:["num+"],109:["num-"],110:["num."],111:["num/"],112:["f1"],113:["f2"],114:["f3"],115:["f4"],116:["f5"],117:["f6"],118:["f7"],119:["f8"],120:["f9"],121:["f10"],122:["f11"],123:["f12"],144:["num-lock","numlock"],145:["scroll-lock","scrolllock"],186:[";","semicolon"],187:["=","equal"],188:[",","comma"],189:["-","minus","dash"],190:[".","period","dot"],191:["/","slash"],192:["`","grave"],219:["["],220:["\\","backslash"],221:["]"],222:["'"]},a={};Object.keys(r).forEach(function(t){var e=r[t];e.forEach(function(e){a[e]=t})}),n.parseKey=function(t){var e={meta:!1,ctrl:!1,shift:!1,alt:!1};t=t.replace(/(?:meta|win|cmd|command)\s*\+\s*/gi,function(){return e.meta=!0,""}),t=t.replace(/(?:ctrl|control|ctl)\s*\+\s*/gi,function(){return e.ctrl=!0,""}),t=t.replace(/shift\s*\+\s*/gi,function(){return e.shift=!0,""}),t=t.replace(/(?:alt|option)\s*\+\s*/gi,function(){return e.alt=!0,""}),t=t.trim().toLowerCase();var n=a[t];return null==n?e:(e.code=n,e.name=r[n][0],e)},n.normalizeName=function(t){var e="";return t.meta&&(e+="meta+"),t.ctrl&&(e+="ctrl+"),t.shift&&(e+="shift+"),t.alt&&(e+="alt+"),e+t.name},n.codeToKey=function(t){return r[t]}},{}],8:[function(t,e,n){"use strict";var r=t("./events"),a=t("./utils"),s=e.exports=n=function(t){if(!(this instanceof s))return new s(t);if(this._textarea=t[0]||t,!this._textarea instanceof HTMLTextAreaElement)throw new Error("Pass valid <textarea> to ZenArea constructor.");this._textarea._zen=this,this._keyBindings={},this.init()};Object.defineProperty(s.prototype,"value",{get:function(){return this._textarea.value}}),s.prototype.focus=function(){return this._textarea.focus(),this},s.prototype.init=function(){var t=this._textarea;Object.keys(r).forEach(function(e){t.addEventListener(e,r[e])})},s.prototype.destroy=function(){var t=this._textarea;Object.keys(r).forEach(function(e){t.removeEventListener(e,r[e])})},s.prototype.bind=function(t,e,n){var r=a.parseKey(t);return r.command=e,r.args=Array.isArray(n)?n:[],this._keyBindings[a.normalizeName(r)]=r,this},t("./getters"),t("./selection"),t("./search"),t("./manipulation")},{"./events":1,"./getters":3,"./manipulation":4,"./search":5,"./selection":6,"./utils":7}]},{},[2])(2)});